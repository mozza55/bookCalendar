<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/book_layout">

<style layout:fragment="content_css">
    .pagination{
        width: fit-content;
        margin: auto;
    }
    .pagination a{
        padding-right: 4px;
        padding-left: 4px;
    }
    .pagination li.active a{
        background-color: #866ec7;
        color: white;
    }
    .search_by{
        padding-top: 15px;
    }

</style>

<section layout:fragment="f-content">
    <div>
        <table>
            <tr>
                <td><span th:text="산정기간" style="font:bold; color:#866ec7; font-size: 18px "></span>
                </td>
            </tr>
            <tr><td><span>읽은 횟수, 서재에 담은 횟수 기준으로 집계되었습니다</span></td></tr>
        </table>
    </div>
    <div class="div-liner">
        <div style="height: 10px"></div>
        <div style="border-top: 1px solid #ccc;"></div>
        <div style="height: 10px"></div>
    </div>
    <!-- 결과 책 목록 -->
    <table>
        <div  class="bookblock" th:each="book: ${bookList}">
            <div>
                <a th:href="@{/books/detail/{bookId}(bookId=${book.id})}">
                    <img src="/images/bookcover.jpeg" width="160">
                </a>
                <p class="bookinfo" th:text="${book.title}"></p>
                <p class="bookinfo" th:text="${book.author}"></p>
            </div>
        </div>
    </table>
    <!-- 하단 페이징 -->
    <nav class="navbar-pagination">
        <ul class="pagination"
            th:with="start=${bookList.number - 2 > 0 ? bookList.number - 2  : 0},
                     last=(${start + 4 < bookList.totalPages-1 ? start + 4 : (bookList.totalPages-1)})">
            <li>
                <a th:href="${bookList.first} ? '#':'javascript:page_set(0);'" aria-label="First">
                    <span aria-hidden="true">First</span>
                </a>
            </li>
            <li th:class="${bookList.first} ? 'disabled'">
                <a th:href="${bookList.first} ? '#' :'javascript:page_set('+ ${bookList.number-1} +');'" aria-label="Previous">
                    <span aria-hidden="true">&lt;</span>
                </a>
            </li>
            <li th:each="page: ${#numbers.sequence(start, last)}" th:class="${page == bookList.number} ? 'active'">
                <a th:text="${page+1}" th:href="'javascript:page_set('+ ${page} +');'"></a>
            </li>

            <li>
                <a th:href="${bookList.last} ? '#' : 'javascript:page_set('+ ${bookList.number+1} +');'" aria-label="Next">
                    <span aria-hidden="true">&gt;</span>
                </a>
            </li>
            <li>
                <a th:href="${bookList.last} ? '#':'javascript:page_set('+ ${bookList.totalPages-1} +');'" aria-label="Last">
                    <span aria-hidden="true">Last</span>
                </a>
            </li>
        </ul>
    </nav>
</section>
<th:block layout:fragment="content_js">
    <script th:inline="javascript">
        function page_set(page) {
            location.href=location.pathname+'?page='+page
        }

    </script>
</th:block>