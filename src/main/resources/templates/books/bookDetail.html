<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header"/>
<style>
    p.bookinfo { margin-bottom: 0.01em; }
</style>
<body>

<div class="wrapper d-flex align-items-stretch">
    <nav th:replace="fragments/sidebar :: sidebar"/>


    <!-- Page Content  -->
    <div id="content" class="p-4 p-md-5 pt-5" >
        <div style="height: 10px"></div>
        <div style="border-top: 1px solid #ccc;"></div>
        <div style="height: 10px"></div>
        <div style="display:flex;">
            <div style="margin-left: 30px; margin-right: 30px">
                <a href="/">
                    <img src="/images/bookcover.jpeg" width="160">
                </a>
            </div>
            <div>
                <div style="height: 10px"></div>
                <p th:text="${book.title}"></p>
                <p th:text="${book.author}"></p>
                <!--
                 로그인 한 경우
                <a class="btn btn-primary" style="color: white;"
                   th:unless="${session.member ==null}"
                   th:href="@{/members/{memberId}/add/book/{bookId} (memberId=${session.member.id}, bookId=${book.id})}">서재에 담기</a>
                 로그인 하지 않은 경우
                <a class="btn btn-primary" style="color: white;"
                   th:if="${session.member ==null}" href="javascript:page1()">서재에 담기</a>
                -->
                <span th:text="${session.member !=null} ? ${session.member.inventory.id}:dg"></span>
                <a class="btn btn-primary" style="color: white;"
                   th:href="${session.member !=null} ?
                    'javascript:inventory_add(' + ${session.member.inventory.id} + ','+ ${book.id} +');'
                    : 'javascript:login()'">서재에 담기</a>
            </div>
        </div>
        <div style="height: 10px"></div>
        <div style="border-top: 1px solid #ccc;"></div>
        <div style="height: 10px"></div>
        <div>
            책 상세 페이지 입니다 *^^*
        </div>

    </div>

</div>
<th:block th:replace="fragments/script :: script" />

<script th:inline="javascript">

    $(document).ready(function () {

    });
    function login() {
        alert("로그인이 필요한 서비스입니다");
        document.location.href="/members/login"
    }
    function inventory_add(inventoryId, bookId) {
        $.ajax({
            url:"/members/"+ inventoryId + "/add/book/"+bookId,
            type: "GET",
            success:function (response) {
                alert("서재에 담았습니다 :"+response);
            }
        });
    }

</script>
</body>
</html>